
HOWTO INSTALL ESCO 2010

NOTES:

   # means root prompt
   $ means user prompt

ASSUMPTIONS:

   1. Apache2 and mod_python are already there.
   2. This INSTALL is for Debian, although I have no Debian installed
      nor ever configured one (there might be confusion with Gentoo).

Install MySQL, unless it's already installed:

 # apt-get install mysql-server
 # apt-get install mysql-client

 # /etc/init.d/mysql start

(possibly you will also edit /etc/mysql/my.cnf)

Configure MySQL for ESCO 2010:

 # mysql -u root

(use -p if you have password for MySQL root)

 mysql> create database esco_2010;
 mysql> create user esco identified by 'esco-pass';
 mysql> grant all privileges on esco_2010.* to esco;

(database name, user name and password must match ESCO 2010
 configuration, which is stored in esco-2010/esco/settings.py)

Install Django and PIL:

 # apt-get install python-django
 # apt-get install python-imaging

(PIL is needed for security codes)

Create directory where abstracts will be stored:

 # mkdir -p /var/db/esco-2010/abstracts
 # chown -R apache:apache /var/db/esco-2010

Create directory where ESCO site will be stored:

 # mkdir -p /var/www/events/esco-2010
 # chown -R apache:apache /var/www/events

Now unpack archieve with ESCO sources:

 $ cd /home/user
 $ tar -xjvf esco-2010.tar.bz2

(substitute `user` with your login, alternatively you can put this
 into /opt or /usr, or in location which you are comfortable with)

Create tables in esco_2010 database:

 $ cd /home/user/esco-2010/esco
 $ python manage.py syncdb

(if you changed MySQL configuration, then adjust esco/settings.py,
 when creating tables you will be asked to setup main admin account)

Create symbolic links to ESCO code and media files:

 # ln -s /home/user/esco-2010/esco /var/www/events/esco-2010/esco
 # ln -s /home/user/esco-2010/esco/media /var/www/events/esco-2010/media

Copy Apache2 configuration to appropriate location:

 # cp /home/user/esco-2010/conf/esco-2010.conf /etc/apache2/sites-enabled/

(if you prefer to use /var/www2 or something instead /var/www, you will
 need to adjust previous step accordingly and edit esco-2010.conf manually)

(possibly you will also need to adjust ServerName in esco-2010.conf)

Now you can restart Apache2 service:

 # /etc/init.d/apache2 restart

Last step is to create (or link) special directories:

 $ cd /home/user/esco-2010/esco/media

 $ mkdir captchas
 # chmod 775 captchas
 # chown apache captchas

 $ ln -s /usr/lib/python2.6/site-packages/django/contrib/admin/media admin

(substitute python2.6 with version installed on your system)

Finally, if everything works, you can will be able to browse:

 http://yourhost/events/esco-2010/

(where `yourhost` can be localhost, hpfem.org etc., depending on configuration)

